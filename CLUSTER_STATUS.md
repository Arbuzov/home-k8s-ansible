# –°—Ç–∞—Ç—É—Å –∫–ª–∞—Å—Ç–µ—Ä–∞ Kubernetes

## –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–æ–¥ (–ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π)

| –ù–æ–¥–∞ | IP –∞–¥—Ä–µ—Å | –†–æ–ª—å | –í–µ—Ä—Å–∏—è K8s | –°—Ç–∞—Ç—É—Å |
|------|----------|------|------------|--------|
| kube-master | 192.168.99.44 | master,worker | **1.33.4** | ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ |
| kube-worker-1 | 192.168.99.101 | worker | **1.33.4** | ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ |
| kube-worker-2 | 192.168.99.102 | worker | **1.33.4** | ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ |

## –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

### ‚úÖ kube-worker-2: 1.33.1 ‚Üí 1.33.4
- –î–∞—Ç–∞: 16 –∞–≤–≥—É—Å—Ç–∞ 2025
- –ú–µ—Ç–æ–¥: `ansible-playbook playbooks/update-worker-version.yml -l kube-worker-2`
- –†–µ–∑—É–ª—å—Ç–∞—Ç: –£—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ v1.33.4

### ‚úÖ kube-worker-1: 1.33.1 ‚Üí 1.33.4
- –î–∞—Ç–∞: 16 –∞–≤–≥—É—Å—Ç–∞ 2025
- –ú–µ—Ç–æ–¥: `ansible-playbook playbooks/update-worker-version.yml -e target_node=kube-worker-1`
- –†–µ–∑—É–ª—å—Ç–∞—Ç: –£—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ v1.33.4

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### ‚úÖ kube-master: 1.33.1 ‚Üí 1.33.4
- –î–∞—Ç–∞: 16 –∞–≤–≥—É—Å—Ç–∞ 2025
- –ú–µ—Ç–æ–¥: `ansible-playbook playbooks/update-master-version.yml -e target_node=kube-master`
- –†–µ–∑—É–ª—å—Ç–∞—Ç: –£—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ v1.33.4
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã: control-plane (etcd, kube-apiserver, kube-controller-manager, kube-scheduler) + kubelet

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### üéâ –ö–ª–∞—Å—Ç–µ—Ä –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ–±–Ω–æ–≤–ª–µ–Ω!
–í—Å–µ –Ω–æ–¥—ã —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–∞ **Kubernetes v1.33.4**
- ‚úÖ –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–∞—è –≤–µ—Ä—Å–∏—è –Ω–∞ –≤—Å–µ—Ö –Ω–æ–¥–∞—Ö
- ‚úÖ –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∑–¥–æ—Ä–æ–≤—ã
- ‚úÖ –ö–ª–∞—Å—Ç–µ—Ä –≥–æ—Ç–æ–≤ –∫ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ–º—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

### –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –≤—Å–µ—Ö –Ω–æ–¥
ansible kube-master -m shell -a "sudo -u pi kubectl get nodes -o wide" -e @credentials.json

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã
ansible all -m shell -a "free -h && df -h /var" -e @credentials.json

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ pod'–æ–≤
ansible kube-master -m shell -a "sudo -u pi kubectl get pods --all-namespaces" -e @credentials.json
```

## Version Skew Policy

–¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç Kubernetes version skew policy:
- Worker –Ω–æ–¥—ã (1.33.4) –º–æ–≥—É—Ç –±—ã—Ç—å **–Ω–∞ –æ–¥–Ω—É –º–∏–Ω–æ—Ä–Ω—É—é –≤–µ—Ä—Å–∏—é** –Ω–æ–≤–µ–µ master –Ω–æ–¥—ã (1.33.1)
- –≠—Ç–æ –¥–æ–ø—É—Å—Ç–∏–º–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è ‚úÖ

## –ó–∞–º–µ—Ç–∫–∏
- –í—Å–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø–ª–µ–π–±—É–∫–∞ `update-worker-version.yml`
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –º–µ—Ç–æ–¥ —Å drain/uncordon –Ω–æ–¥
- –í—Å–µ –ø–∞–∫–µ—Ç—ã Kubernetes –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è kubelet –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
